# Network-Final-Project

## 1. Introduction
### 1.1. About the project
The research paper [Practical Traffic Analysis Attacks on Secure Messaging Applications](https://www.researchgate.net/publication/221554707_Correlation_of_Instant_Messaging_Traffic_with_User_Behavior) reveals that it is possible to identify which groups the user belongs to, by analyzing the traffic of instant messaging applications.
It shows how easy it is to use simple statistical methods on the traffic data to identify the user, once achieving ground truth and succeeding in wiretapping the user's traffic.

### 1.2. The experiment
The experiment is based on another experiment that was conducted in the research paper mentioned above.
In this experiment, we will try to reproduce the results of the research paper and see if we can get the same results.
The experiment process is based on the following steps:
1. Recording the traffic data in pcap files of 4 different IM channels in Telegram. Each channel has a different attribute:
- Images.pcap - a channel that is mainly used for sending images.
- Video.pcap - a channel that is mainly used for sending videos.
- Audio.pcap - a channel that is mainly used for sending audio messages.
- Spotify.pcap - a channel that is mainly used for sending images, while playing spotify music in the background to generate noise in the traffic.
* We've also recorded another two pcap files, one for a user that is a confirmed member of the IM group (correlated) and another for a user that is not a member of the IM group (uncorrelated).
2. Converting the pcap files to csv files, and filtering the data to get only TCP packets whose TCP destination port is 443 (HTTPS).
3. Plotting the data to three different types of graphs:
- Raw data of the user traffic analysis (packet length in bytes by time in seconds).
- PDF of delay between packets arrival time.
- CCDF of message sizes normalized by the maximum message size.

## 2. How to use
### 2.1. Prerequisites
- Python 3.11 or higher
- Windows 10 or higher or Linux Ubuntu 20.04 or higher
- Git
- PIP (Python package manager)
- Wireshark (optional)

### 2.2. Installation
1. Clone the project from GitHub by using the following command:
```git clone https://github.com/Jon400/Network-Final-Project.git```
2. Upgrade pip by running the following command:
```python -m pip install --upgrade pip```
3. Navigate to the project folder ```src``` and run the following command to install all required packages:
```pip install -r requirements.txt```
4. Open a Jupyter notebook by running the following command:
```jupyter notebook```
5. Open your browser and navigate to your local Jupyter server (usually http://localhost:8888)
6. Open the file ```WetPart.ipynb```.
7. Run the notebook by clicking on the ```Run``` button in the toolbar or by pressing ```Shift + Enter```. You can also run the whole notebook by clicking on ```restart the kernel and run all cells```.

#### Issues during installation
* If you get an error, about Jupyter configuration while running the notebook, run the following command:
```jupyter notebook --generate-config```

### 2.3. Usage
#### Project structure:
- ```WetPart.ipynb``` - Jupiter Notebook includes all the code and the results of the traffic analysis. The notebook includes the following main things:
- Importing the required packages and reading the pcap file as a CSV
- Plotting the raw data of the user traffic analysis (packet length in bytes by time in seconds)
- Plotting a PDF of the delay between packet arrival times.
- Plotting the CCDF of message sizes normalized by the maximum message size. There are 4 lines; each line represents a different IM group.
- Comparing the traffic graphs of a confirmed member (correlated) and a non-member (uncorrelated) in the IM group.
- ```res``` - folder contains the outcome graphs generated by the notebook.
- ```resources``` - Folder contains the pcap files and the csv files generated from the pcap files.

**Note:**
When background noise is added, it is more difficult to analyze the traffic data, because the peaks are less distinct and more steady.

## 3. Discussion
The results assume that the target user is active in only one IM group.
If the user is active in more than one IM group, it will be more difficult to identify which group the user belongs to because the traffic data will be more noisy.